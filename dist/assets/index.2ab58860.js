var G=Object.defineProperty,K=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var f=(i,e,t)=>e in i?G(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,x=(i,e)=>{for(var t in e||(e={}))J.call(e,t)&&f(i,t,e[t]);if(S)for(var t of S(e))H.call(e,t)&&f(i,t,e[t]);return i},w=(i,e)=>K(i,X(e));var E=(i,e,t)=>(f(i,typeof e!="symbol"?e+"":e,t),t);import{a as A,p as N,i as F}from"./vendor.f82318bc.js";const q=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(a){if(a.ep)return;a.ep=!0;const n=t(a);fetch(a.href,n)}};q();const l="http://192.168.31.132:5000",W=10,z=i=>{o.on("play-audio",e=>{new Audio(e).play()}),o.on("participant-mute",()=>{i.participant.mute()}),o.on("participant-unmute",()=>{i.participant.unmute()}),o.on("chat-exit",()=>{c.configure(`${i.loggedInUser.username} has left the audio chat!`,"sad"),c.show(),D.incrementExp(10)})};var B="/assets/mute.39370264.svg",Z="/assets/mic.1e0c3242.svg",$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAAnUlEQVRYw+2Xuw2AMAxE2YM1+EyGRAOeJqNBhQQbHIGCjkCcHBKSX597Uiw7TlEYRmZQwmFGgNT4BQ+kCRzAFUxsQY4QE5hAIYBAiAIffyAkAfqrA4UjqLBGKFRXVEcolEVusL1U3AkQg7AFIcU/BJK/yG1ykTPFqxotJl4l6Mijwp8ZqMPuPDVSx7U9mSb4evmlr+/sDwj9C2UYKnaLViNIIVNySwAAAABJRU5ErkJggg==";class p{constructor(e=!1,t=()=>{}){this.onClose=t,this.isOpen=e}makeDOMElements(){const e=document.getElementById("overlays");this.bgDiv=document.createElement("div"),this.bgDiv.className="bg-disabled",this.container=document.createElement("div"),this.container.className="popup-container",this.closeBtn=document.createElement("button"),this.closeBtn.className="close-button",this.closeBtn.addEventListener("click",()=>this.close()),this.container.append(this.closeBtn),e.append(this.bgDiv,this.container)}populatePopup(e){this.container.append(e)}show(){this.isOpen||(this.makeDOMElements(),this.isOpen=!0)}close(){this.isOpen=!1,this.onClose(),this.container.classList.add("closeState"),setTimeout(()=>this.remove(),300)}remove(){this.bgDiv.style.zIndex=-2,this.container.remove()}}const g=(i,e,t="left",s=!0)=>{const a=document.createElement("button");a.className="icon-button";const n=document.createElement("img");n.src=e,n.className="icon-button__icon";const r=document.createElement("span");return r.className="icon-button__text",r.innerText=i,t=="right"?(n.style.transform=s?"rotate(180deg)":"",a.append(r,n)):a.append(n,r),a};class M{constructor(e,t){this.username=e,this.avatar=`${l}/thumbnails/${t}.png`,this.isMute=!0,this.makeParticipantDiv()}makeParticipantDiv(){this.container=document.createElement("div"),this.container.className="participant";const e=document.createElement("img");e.alt=this.username,e.src=this.avatar;const t=document.createElement("span");t.innerText=this.username;const s=document.createElement("div");s.className="mute-icon-div",this.muteIndicator=document.createElement("span"),this.muteIndicator.className="mute-icon",this.muteIndicator.style.backgroundSize="contain",this.mute(),s.appendChild(this.muteIndicator),this.container.append(e,s,t)}renderMuteIndicator(){this.muteIndicator.style.background=this.isMute?`url(${B})`:"none"}mute(){this.isMute=!0,this.renderSpeaking(!1),this.renderMuteIndicator()}unmute(){this.isMute=!1,this.renderSpeaking(!0),this.renderMuteIndicator()}renderSpeaking(e){e?this.container.style.outline="solid 1px #ffc700":this.container.style.outline="none"}}class _ extends p{constructor(e,t){super(!1,()=>{O(e)});this.roomName=e,this.sender=t,this.latency=500,this.loggedInUser=new M(h.username,h.avatar),this.participant=new M(t.username,t.avatar)}show(){if(this.isOpen)return;this.makeDOMElements(),this.chatContainer=document.createElement("div"),this.chatContainer.className="chat-container",this.participantContainer=this.createParticipantsDiv();const e=this.createAudioControlDiv();this.muteButton.disabled=!0,this.chatContainer.append(this.participantContainer,e),this.populatePopup(this.chatContainer),z(this),this.initialiseRecorder()}createParticipantsDiv(){const e=document.createElement("div");return e.className="participant-container",e.append(this.loggedInUser.container,this.participant.container),e}createAudioControlDiv(){const e=document.createElement("div");return e.className="audio-controls",this.muteButton=document.createElement("button"),this.muteButtonIcon=document.createElement("span"),this.muteButtonIcon.className="mute-icon",this.muteButtonIcon.style.background=`url(${B})`,this.muteButtonText=document.createElement("span"),this.muteButtonText.className="mute-icon-text",this.muteButtonText.innerText="Unmute",this.muteButton.append(this.muteButtonIcon,this.muteButtonText),this.muteButton.addEventListener("click",()=>{this.loggedInUser.isMute?(o.emit("participant-unmute",this.roomName),this.unmuteRecorder()):(o.emit("participant-mute",this.roomName),this.muteRecorder())}),this.exitButton=g("Exit",$,"left"),this.exitButton.addEventListener("click",()=>{o.emit("chat-exit",this.roomName),this.close()}),e.append(this.muteButton,this.exitButton),e}muteRecorder(){this.muteButtonIcon.style.background=`url(${B})`,this.muteButtonText.innerText="Unmute",this.loggedInUser.mute(),this.mediaRecorder.stop()}unmuteRecorder(){this.muteButtonIcon.style.background=`url(${Z})`,this.muteButtonText.innerText="Mute",this.loggedInUser.unmute(),this.mediaRecorder.start(),setTimeout(()=>{this.mediaRecorder.stop()},this.latency)}initialiseRecorder(){navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{this.mediaRecorder=new MediaRecorder(e),this.muteButton.disabled=!1;let t=[];this.mediaRecorder.addEventListener("dataavailable",function(s){console.log("Data collected"),t.push(s.data)}),this.mediaRecorder.addEventListener("stop",()=>{const s=new Blob(t);t=[];const a=new FileReader;a.readAsDataURL(s),a.onloadend=()=>{var n=a.result;o.emit("voice",{voice:n,roomName:this.roomName})},this.loggedInUser.isMute||(this.mediaRecorder.start(),setTimeout(()=>{this.mediaRecorder.stop()},this.latency))}),this.loggedInUser.isMute||(this.mediaRecorder.start(),setTimeout(()=>{this.mediaRecorder.stop()},this.latency))})}}var ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAABaUlEQVRYw+2XPUjDQBiGnyoI/ixu1k06Ogo6uCoi6OakdhVE6OhqdXIRV2dFBTfJ5iyCP6NFBGfbSTtV/Os5NAGTXjW5fF+nvDclR+7NPcn3c5Apk5yuKNKnafCBocYOeS2DTwwGwzunTGkatMYtq9LAwgYGQ41tSWBfbQYtYCdSwAKDec75jtjcSAALFu0Fxtjj1QJsRMKgx78eYJ2KJLDAIBe6O2sFtuICrOk/XmKRcfp/zdiAVSknBdaMLPHMJUeUKTLNaAdgx0y6G4THGxU8HiwzsYGZFCMWsGEmWGKTAy54+mc/9pBMBCxHgRnW2OWMO15i21yz7BaSSfZXZStdSMbZX0JgXTAQR6TwkdV/U/VA+/udG9zj8ZgmVdiS3aGf7PIMsdGWiRyTXYmFSLousE/dBUpYQVkJaw5PquBEDQatUARKZicoqYt+0LbYoQi0LeqNl3rr2LXmV619Vz+AqB+hMmVy1Q8uoDb/pOLIWwAAAABJRU5ErkJggg==";class te extends p{constructor(e,t){super(!1,()=>{O(e),console.log("Sending event and closing chat")});this.roomName=e,this.sender=t}show(){if(this.isOpen)return;this.makeDOMElements(),this.chatContainer=document.createElement("div"),this.chatContainer.className="chat-container";const e=this.createChatWindow(),t=this.createFormInput();this.chatContainer.append(e,t),this.populatePopup(this.chatContainer),ie(this)}createChatWindow(){const e=document.createElement("div");e.className="chats__container";const t=document.createElement("h2");t.innerText=this.sender.name,this.chatWindow=document.createElement("div"),this.chatWindow.className="chat__window";const s=document.createElement("h2");return s.className="float-message",s.innerText="Very silent here \u25D4\u203F\u25D4",this.isChatEmpty=!0,this.chatWindow.appendChild(s),e.append(t,this.chatWindow),e}createFormInput(){const e=document.createElement("form");e.className="chat__input-form",this.messageInput=document.createElement("input"),this.messageInput.type="text",this.messageInput.placeholder=" Enter Text!";const t=g("Send",ee,"right",!1);return t.type="submit",t.disabled=!0,t.addEventListener("click",s=>{s.preventDefault(),this.messageInput.value.trim()!==""&&(ae(this.messageInput.value,this.roomName),this.addMessage(this.messageInput.value,!0),this.messageInput.value="")}),this.messageInput.addEventListener("input",s=>{t.disabled=s.target.value===""}),e.append(this.messageInput,t),e}addMessage(e,t){this.isChatEmpty&&(document.querySelector(".float-message").remove(),this.isChatEmpty=!1);const s=document.createElement("div");s.className="chat_message",t&&s.classList.add("from-me");const a=document.createElement("span");a.innerHTML=e;const n=document.createElement("span");n.innerText=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}).toUpperCase(),s.append(a,n),this.chatWindow.append(s)}}let L=!1,k="";const se=i=>{o.on("start-chat",e=>{const t=e.participants.filter(s=>s.socId!==o.id)[0];console.log(t),L=!0,k=e.roomName,c.configure(`Connection established for ${e.type} chat!`,"success"),c.show(),e.type==="text"?new te(k,{name:t.name}).show():e.type==="audio"&&new _(k,{username:t.name,avatar:t.avatar}).show()}),o.on("cancel-chat",()=>{c.configure("The other person turned down the request :/","sad"),c.show(),i.commDialog.dialog.closeAlert()})},ie=i=>{o.on("add-message",e=>{i.addMessage(e,!1)}),o.on("chat-exit",()=>{c.configure(`${h.username} has left the chat!`,"sad"),c.show(),console.log("Got a request to close chatwin")})},I=(i,e,t)=>{o.emit("init-chat",{type:i,fromSocId:o.id,toSocId:e}),t.closeAlert(),c.configure("Request Sent! waiting for response","waiting"),c.show(),setTimeout(()=>{L||(c.configure("There is no response from the other side","sad"),o.emit("cancel-request",{fromSocId:o.id}))},W*1e3)},ae=(i,e)=>{o.emit("new-message",{roomName:e,message:i})},O=i=>{o.emit("chat-exit",i)},ne=(i,e)=>new Promise((t,s)=>{o.emit("init",{socId:o.id,name:h.name,avatar:h.avatar,x:i,y:e},a=>{t(a)})}),re=i=>{o.on("new-player",e=>{i.currentPlayers[e.socId]=e,i.otherSprites[e.socId]=i.addPlayer(e)}),o.on("move-player",e=>{i.needsToUpdate[e.socId]={horizontal:e.horizontal,vertical:e.vertical}}),o.on("stop-player",e=>{const t=i.needsToUpdate[e.socId];t&&(t[e.movement]=null),i.otherSprites[e.socId].setPosition(e.x,e.y)}),o.on("remove-player",e=>{delete i.currentPlayers[e],i.otherSprites[e].destroy(),delete i.otherSprites[e]})};class P{constructor(e,t,s=!1,a=!1){E(this,"setAlertText",e=>{this.alertText&&(this.alertText=e)});this.text=e,this.isOpen=!!s,this.onClose=t,this.forceRemove=a,s&&this.makeDOMElements()}show(){this.isOpen||(this.isOpen=!0,this.makeDOMElements())}closeAlert(){this.alertDiv.className="closeState",this.isOpen=!1,this.setAlertText(""),this.onClose&&this.onClose(),this.forceRemove&&setTimeout(()=>this.remove(),500)}remove(){this.alertDiv.remove()}DOMExists(){return document.getElementById("alert")!==null}makeDOMElements(){if(!this.DOMExists){const e=document.getElementById("overlays");this.alertDiv=document.createElement("div"),this.alertDiv.id="alert",this.closeBtn=document.createElement("button"),this.closeBtn.className="close-button",this.closeBtn.addEventListener("click",()=>this.closeAlert()),this.alertDiv.appendChild(this.closeBtn),this.alertText=document.createElement("span"),this.alertText.id="alertText",this.alertText.innerText=this.text,this.alertDiv.appendChild(this.alertText),e.appendChild(this.alertDiv)}}}const oe=({text:i,onClickFn:e})=>{const t=document.createElement("button");return t.innerText=i,t.addEventListener("click",()=>e()),t},le=i=>{const e=document.createElement("div");return e.className="button-group",i.forEach(t=>{e.append(oe(t))}),e};class U extends P{constructor(e,t,s=!1,a=!1,n=()=>{}){super(null,n,s,a);this.dialogObj=e,this.spriteImg=t}makeDOMElements(){const e=document.getElementById("overlays");this.alertDiv=document.createElement("div"),this.alertDiv.id="dialog",this.closeBtn=document.createElement("button"),this.closeBtn.id="close-button",this.closeBtn.addEventListener("click",()=>this.closeAlert());const t=this.generateConversation();this.alertDiv.append(this.closeBtn,t),e.appendChild(this.alertDiv)}generateConversation(){const e=document.createElement("div");e.className="conv-container";const t=document.createElement("div");t.className="question-container";const s=document.createElement("img");s.src=this.spriteImg,this.questionText=document.createElement("p"),this.questionText.innerHTML=this.dialogObj.text,t.append(s,this.questionText),e.append(t),this.inputControl=le(this.dialogObj.buttons);const a=document.createElement("img");return a.src=h.avatar?`${l}/thumbnails/${h.avatar}.png`:`${l}/thumbnails/cap_blue_boy.png`,this.inputControl.append(a),e.append(this.inputControl),e}}var ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEySURBVHgBzVULEcIwDC1TMAdMAhJAARLAAXPA5gAHMAVI4FAwHHQOhoOQHukt66Vry+fg3eWgTfKSNF2qVAAAkKPsUTQMaFGOKIV6B0iwQ+nBD6Mr1Ssg8likBTGlBzKXKsklrswTY4+Sq3gY2/gqqImp0BLXLDIgiM6IgKv3iD4GMQNfxkEyoaKvV/CbI3Lx103O7CXmmzAebN6GO99BK+lMBR1tzJm+Uem4MfIF/e0yplgx4wPKXcXD2NZsPQpwpcXGarF3rkMINfp0bL2m38Y+KHZyLrkXrktIfA/gOYktCrtZ2YEFztglhxOMB6AmH9c2h+GCVD5FC57ZPgXisEloyaBgQTQkvLfmaKN8nSAGZ5Qtu3aurdFdnKMrYjKqIA291JNQEJ6hFkg1VVhOET8A7++I3wROvJYAAAAASUVORK5CYII=",he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD3SURBVHgBrZSBFYIgEIZPJ3AEm6DaoA1yBEdog2wC26CaIDeoDWoD3MA2uO7iSCN6kvC996sc8AscAOAAETPShnQmKexREivBF25M6nAcNWpMDWr8n/qX2RanU7umGUrBXokYKnrlEMaDNEtRL2wO4WSkIqXHGuLxMsytIA/9asXupNYRs5mDY3EXXEPvSsrKtMZ+f1ZSXtmdU8dfMtN/MGJwfLvBz6OFUr55xC74faIUGx4xHg1PuYF4NGZjd4O1m0pLWpqknCCcXZIkOmmywCHs37aoL9M4ZmK4QJ3+A+pbh6U8jLhPCb6IMV/3w/2nJMZ1ziQ+ATYa4i2oLVcEAAAAAElFTkSuQmCC",me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEkSURBVHgB7VbBrcIwDHVC9a8/Crd/ajdgBP4GsAGbAJPQFZiAjgATEAYA5cohNi6CA60LQgL14ndopWc7fqpeapu9cw4GgwkIKI7HEj4A7jHiHqNWIKWQ8csZolVHbQmfgLUT7jFv0sba0kLPUAG9C8iuT2MqKcjuHXfUbYsYo5BfO92JFUIPTGln4AmC9yTxP4j5X4yHVv5wuAGicZPnQ5bF6bSQzlIPqIDsRTxI5JnHBDu+ZWAiOhipBjFCB57egk5V3u/5lTd5Qvzn61nBG1APqIDeBegsUAEqIOOhkvN+vpGC/G8vJF66Adf8lKYgrWTWzm7z4zEfYH2fhrl0IA+WAG/gtie2d0XvxR78+X/VAyqgNmGsNxn4JhBLdnzVpJkLF5q8bSWLG3WpAAAAAElFTkSuQmCC";class de{constructor(){this.playerApproached=null}setPlayerApproached(e){e!==this.playerApproached&&(this.playerApproached=e)}createDialog(e){this.setPlayerApproached(e),this.dialog||(this.dialog=new U({text:`Choose a mode of communication with ${this.playerApproached.name}`,inputType:"icon-buttons",buttons:[{text:"Audio",icon:ce,onClickFn:()=>I("audio",this.playerApproached.socId,this.dialog)},{text:"Chat",icon:he,onClickFn:()=>I("text",this.playerApproached.socId,this.dialog)},{text:"Cancel",icon:me,onClickFn:()=>{I("cancel",this.playerApproached.socId,this.dialog)}}]},`${l}/thumbnails/${h.avatar}.png`,!1,!0)),this.dialog.show()}}var ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAAmUlEQVRYw+3WQQ3CQBBG4fbClTsO0IAKXOACF8hABRpQgACuHMiHAkrT3T+BMM/AS7qvMzMMRVH8Ac42WQF3B2NSABfbrICHo1VSAFe7rICnk3VSADf7rAAd4/WOXvGaoke8pmmP12fa4jWHlnjNZWm83yEIf6LoI4czjf5o4VERHXbRcR1eONGVGV760bMlfHilT8eiKH6AFywvh4ecoHn9AAAAAElFTkSuQmCC",pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAAOUlEQVRYw+3NwQkAIAwEwXSe0mMDQTCIIMz+7yZCelJldSUAAADcBtqLAvwB7JYAAAAAAABOAWncAkqc/TMuohwkAAAAAElFTkSuQmCC",Ae="data:image/png;base64,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",ge="data:image/png;base64,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",ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAjCAYAAACOysqWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUcSURBVHgBnVZLbxxFEK6ex+7sY3bXdhy8McJLpCgcIryREAIumCMnjOAO+QU4ByQkDonFBfGQ7F/g8AeAG4ILy4mHkDCIQyIlZBYR4sSOd/Y57xmqumf25dmsQ1ut8XZXf99XVV01w2BquC9c+v6PdndjrZAD0/Xhge3AekWH380uvLhUhl8sD6cPaYMB3Lh6586V8TVp2igA2C6rKgdvDix4nsDbXb7nBCGsawrMGj5jX0yvnSDI/fpnY62gmQS+ls+hBy7YCJwQZRmDVUVKwzfev327MZeARhTB7lPZLKxoGWh7/pAIotle4NZ2GlYqQcZXdi6W8lyxHQScKAlXs2/BqipxTyaAgqBxagK2v2+ipAbJuqgXOBF5Qd4cOC4Hfy4rj+wpuYZhnJqABiWbFBuonHKAeYFb3T4navZtOK+OCNKSO5eAkq3JkslQH3lBoJokDfNCYVrLMlDlcD8tuXMJfn5L3jwoH0NZVbgHSQ5uohcR/lGy60seXL70b+3Ht5WNWTgzL3XI5PqjYvvq+YXCq7+1ulApS9BRbWB5D1ZyGC6rDdVAg8hnBiis9sQENFzV27t5rgm5czwncC9eT57/4MyQmACu/C+CrJ6ByjMVKFV1yC/mRsQ9FxycrWYLZ/txEOkE0Tcv1XwneEOZ0RayehZ0fJ65sMSJrKPeOnx5K9WWnQD/7uX3MIfXcVb4go1BcFQAT6XECKMMNjvVw6vm4DWJkqMGtoDX2Os/GTMJom9fuYZG14fAnQKCZ2DmUDAzeQug3J9JwlLBu3kAU4dTDyJabvFn5AcG8/KX2ZsNk7Z4HVDMh+Ck+knAGYbIx6o+XOAhZIpc862He8m2KDTGxAIZtovikBKKOQQKhVIWThJQx5BjkiORNrlU3Dz8qLLBnePqAfgProJGBg8QDiWQCqA4AKh0R6AE9hBtI3zKoUg+2VK+MHdMc6FQXbiGoWhIqH6LH6JNOkhqyAPyzZF5o+frj0pikh15og+ECCc+o0aChEJMGst6/e4WVOiir/OVQXbSdXesTVljexS2rDu6stwWSbLByAvck3JaRVOUuoL3qM5VenFRkcs+E8rHBymmUJF6IuzlR3vkiYeCpDg/gQwMPdKWS3VpWFBJHOnmhifqD1WigL4mwkUFVrAn98MYg8W2PFdhZbJdR8lMISDXO8XRFaYwTQ8Wg8jCEx/ffkgVGbhT464HSuxFBBNFvtgR7oeoJ2ePCKfB+VmJE2DBQWg7+xK9gYUiT7hINspUAnw6FAjVLvakli6qfXwQOJ0nO9UHvzsALwoMlBz+gLubULCE+5QsJVaU8FBoaM4aidckJO/wJfvw2Hj6U0APrNwNBDO5Ed0UjhyKODKYP5Ka4cY4S30ILQe8w9bXnJs3pTDa5calHn3gYC4kYU93XooeD54UJl1tvc+vsX1wZLiexTHFLbK1HaBWS2BnW6Lf+PEFk1P6El+LK5eEkC15X+6B1+pA9+793erHiJcQcC+wj/NQ0W0iEvKE8sETz0RTY7FaCl8Uh4U+tKlPITiFpvvXvd2VT7ydoZPjHrt7F+pq9cxX+G+NL/TxPdzNibfZifAgSdEeVjdXjuBLH5pbE2bT5/j72LL3lHxuY7hI1Yvlz5806HWpiN4T4UfYoHlg9v4+2B5XPpMgGa3Pl98trJ59h8nyhqIXJkUgqN8bgHPcNu0Hx7u9zmDn2R0w03DmXsT7H0BN8uS6sqjXkzUMhxmBtF/9zG/MO/8fu3RbjYLTtDwAAAAASUVORK5CYII=";class ve extends p{constructor(e){super();this.game=e,this.medalMap={1:Ae,2:ge,3:ye},this.playerList=[{username:"ayush123",score:1300,timePlayed:2},{username:"ayu123",score:1200,timePlayed:4},{username:"vladimir_putin",score:1100,timePlayed:2},{username:"player1jdsh",score:1e3,timePlayed:4},{username:"player1jdsh",score:900,timePlayed:4}]}show(){this.makeDOMElements();const e=document.createElement("div");e.className="leaderboard_container";const t=document.createElement("h1");t.innerText="Leaderboard",A.post("https://milo-back-end.herokuapp.com/leaderboard",{game:this.game},{headers:{Authorization:`JWT ${localStorage.getItem("JWT")}`}}).then(({data:s})=>{const a=this.createPlayerList(s);e.append(t,a),this.populatePopup(e)}).catch(s=>{c.configure("Error in retrieving leaderboard","error")})}createPlayerList(e){const t=document.createElement("div");return t.className="player-list",t.append(this.makeLeaderboardStub("Rank",{username:"Username",score:"Score",timePlayed:"Times played"})),e.map((s,a)=>{t.append(this.makeLeaderboardStub(a+1,s))}),t}makeLeaderboardStub(e,{username:t,score:s,timePlayed:a}){const n=document.createElement("div");return n.className="leaderboard-stub",n.innerHTML=`
    <span class="rank">${this.decideRankUI(e)}</span>
    <span class="username">${t}</span>
    <span class="score">${s}</span>
    <span class="times-played">${a}</span>`,n}decideRankUI(e){return this.medalMap[e]?`<img class="medal" src=${this.medalMap[e]}/>`:e==="Rank"?e:`<strong>${e}</strong>`}}class be extends p{constructor(e){super();this.gameType=e}show(){this.isOpen||(this.makeDOMElements(),this.iframe=document.createElement("iframe"),this.iframe.src=`${l}/${this.gameType}/`,this.iframe.className="game-frame",this.populatePopup(this.iframe),this.isOpen=!0)}}class fe extends p{constructor(){super(!1);this.games=[{name:"Tic Tac Toe",url:"tictactoe"},{name:"Running Dinosaur",url:"dinosaurgame"},{name:"Math Game",url:"mathgame"},{name:"Remember That!",url:"memorygame"}]}show(){if(this.isOpen)return;this.makeDOMElements();const e=document.createElement("div"),t=document.createElement("h1");t.innerText="Game Center";const s=this.makeGameGrid();e.append(t,s),this.populatePopup(e),this.isOpen=!0}makeGameGrid(){const e=document.createElement("div");return e.className="game-grid",this.games.forEach(t=>e.append(this.makeGameContainer(t))),e}makeGameContainer(e){const t=document.createElement("div");t.className="game-container";const s=document.createElement("div");s.className="game-img-name";const a=document.createElement("img");a.src=`${l}/thumbnails/${e.url}.png`;const n=document.createElement("span");n.className="game-name",n.innerText=e.name,s.append(a,n);const r=document.createElement("button");r.innerHTML=`<img src=${pe} alt="leaderboard"/>`,r.title="Leaderboard",r.addEventListener("click",()=>{new ve(e.url).show()});const d=document.createElement("button");return d.innerHTML=`<img src=${ue} alt="Play Game"/>`,d.title="Play",d.addEventListener("click",()=>{new be(e.url).show()}),t.append(s,r,d),t}}class xe{constructor(e,t,s){this.min=e,this.max=t,this.value=e,this.onValueChange=s,this.createDomElements()}createDomElements(){this.controlDiv=document.createElement("div"),this.controlDiv.className="flex-center",this.decrementButton=document.createElement("button"),this.decrementButton.innerText="-",this.decrementButton.addEventListener("click",()=>this.decrement()),this.decrementButton.disabled=!0,this.valueSpan=document.createElement("span"),this.valueSpan.innerText=this.value,this.incrementButton=document.createElement("button"),this.incrementButton.innerText="+",this.incrementButton.addEventListener("click",()=>this.increment()),this.controlDiv.append(this.decrementButton,this.valueSpan,this.incrementButton)}increment(){console.log("incrementing"),this.value+1<=this.max&&(this.value++,this.valueSpan.innerText=this.value,this.onValueChange(this.value)),this.value===this.max?this.incrementButton.disabled=!0:this.incrementButton.disabled=!1,this.value===this.min?this.decrementButton.disabled=!0:this.decrementButton.disabled=!1}decrement(){console.log("decrementing"),this.value-1>=this.min&&(this.value--,this.valueSpan.innerText=this.value,this.onValueChange(this.value)),this.value===this.max?this.incrementButton.disabled=!0:this.incrementButton.disabled=!1,this.value===this.min?this.decrementButton.disabled=!0:this.decrementButton.disabled=!1}}class we extends p{constructor(){super()}show(){this.isOpen||(this.makeDOMElements(),A.get("https://milo-back-end.herokuapp.com/shop").then(({data:e})=>{this.shopItems=e,this.shopContainer=this.createShopContainer(),this.populatePopup(this.shopContainer)}),this.isOpen=!0)}createShopContainer(){const e=document.createElement("div");e.className="shop-container";const t=document.createElement("h1");t.innerText="Shop";const s=document.createElement("h2");s.innerText="Popular Products";const a=this.createItemsGrid();return e.append(t,s,a),e}createItemsGrid(){const e=document.createElement("div");e.className="shop__item-grid";const t=[];return this.shopItems.forEach((s,a)=>{t.push(this.createItemDiv(s))}),e.append(...t),e}createItemDiv(e){const t=document.createElement("div");t.className="shop-item__container";const s=document.createElement("img");s.src=e.image;const a=document.createElement("span");a.innerText=e.name;const n=document.createElement("span");return n.innerText=`$${e.price}`,t.append(s,a,n),t.addEventListener("click",()=>{this.showDetails(e)}),t}showDetails(e){this.itemDetailsDiv=document.createElement("div"),this.itemDetailsDiv.className="item-details__container";const t=document.createElement("img");t.src=e.image;const s=document.createElement("div");s.className="item-text__container";const a=document.createElement("h1");a.innerText=e.name;const n=document.createElement("h2");n.innerText=`$${e.price}`;const r=document.createElement("p");r.innerHTML=`<span class='hy'>About</span></br>${e.desc}`;const d=new xe(1,e.quantity,m=>{this.buyButton.innerText=`Buy now for ${m*e.price}`,m*e.price<h.money?this.buyButton.disabled=!0:this.buyButton.disabled=!1}),u=document.createElement("button");u.className="close-button",u.addEventListener("click",()=>{this.itemDetailsDiv.style.zIndex=-3,this.itemDetailsDiv.style.display="none"}),this.buyButton=document.createElement("button"),this.buyButton.innerText=`Buy now for ${d.value*e.price}`,this.buyButton.addEventListener("click",()=>{A.post("https://milo-back-end.herokuapp.com/shop",{itemId:e.itemId},{headers:{Authorization:`JWT ${localStorage.getItem("JWT")}`}}).then(({data:m})=>{c.configure(m.message,"success"),c.show()}).catch(m=>{console.log(m),c.configure(m.response.data.error,"error"),c.show()})}),s.append(a,n,r,d.controlDiv,this.buyButton),this.itemDetailsDiv.append(u,t,s),this.container.appendChild(this.itemDetailsDiv)}}const y=(i,e)=>{i.create({key:"left-walk",frames:i.generateFrameNames(e,{prefix:"left-walk.",start:0,end:2,zeroPad:3}),frameRate:10,repeat:-1}),i.create({key:"right-walk",frames:i.generateFrameNames(e,{prefix:"right-walk.",start:0,end:2,zeroPad:3}),frameRate:10,repeat:-1}),i.create({key:"front-walk",frames:i.generateFrameNames(e,{prefix:"front-walk.",start:0,end:2,zeroPad:3}),frameRate:10,repeat:-1}),i.create({key:"back-walk",frames:i.generateFrameNames(e,{prefix:"back-walk.",start:0,end:2,zeroPad:3}),frameRate:10,repeat:-1})};class Ee extends N.exports.Scene{constructor(){super({key:"Home"})}preload(){this.avatarName=h.avatar,this.needsToUpdate=[],this.load.image("tiles",`${l}/maps/tilesets/tuxmon-sample-32px-extruded.png`),this.load.tilemapTiledJSON("map",`${l}/maps/json/tuxemon-town.json`)}create(){this.commDialog=new de,this.shop=new we,this.gamePicker=new fe;const e=this.make.tilemap({key:"map"}),t=e.addTilesetImage("tuxmon-sample-32px-extruded","tiles");e.createLayer("Below Player",t,0,0),this.worldLayer=e.createLayer("World",t,0,0);const s=e.createLayer("tictactoe",t,0,0),a=e.createLayer("mathgame",t,0,0),n=e.createLayer("dinosaurgame",t,0,0),r=e.createLayer("memorygame",t,0,0),d=e.createLayer("Above Player",t,0,0),u=e.createLayer("interactive",t,0,0);this.worldLayer.setCollisionByProperty({collides:!0}),u.setCollisionByProperty({collides:!0}),s.setCollisionByProperty({collides:!0}),a.setCollisionByProperty({collides:!0}),n.setCollisionByProperty({collides:!0}),r.setCollisionByProperty({collides:!0}),d.setDepth(10);const m=e.findObject("Objects",b=>b.name==="Spawn Point");this.player=this.physics.add.sprite(m.x,m.y,this.avatarName,"front-walk.000").setBodySize(32,20,!0).setSize(20,32).setOffset(7,0),this.player.scale=1.2,this.player.setPushable(!1),this.physics.add.collider(this.player,this.worldLayer),this.physics.add.collider(this.player,s,()=>{this.gamePicker.show()}),this.physics.add.collider(this.player,u,()=>{this.shop.show()}),y(this.player.anims,this.avatarName),ne(this.player.x,this.player.y).then(b=>{this.currentPlayers=b,this.addPlayersToScene()}),re(this),se(this);const T=this.cameras.main;T.startFollow(this.player),T.setBounds(0,0,e.widthInPixels,e.heightInPixels),this.cursors=this.input.keyboard.createCursorKeys(),this.keyDownSent={vertical:"ready",horizontal:"ready"}}update(e,t){const s=175,a=this.player.body.velocity.clone();this.keyDownSent.vertical==="ready"&&(this.cursors.down.isDown||this.cursors.up.isDown)&&(o.emit("player-key-down",{socId:o.id,key:this.getKeyPress(this.cursors,"vertical")}),this.keyDownSent.vertical="sent"),this.keyDownSent.horizontal==="ready"&&(this.cursors.left.isDown||this.cursors.right.isDown)&&(o.emit("player-key-down",{socId:o.id,key:this.getKeyPress(this.cursors,"horizontal")}),this.keyDownSent.horizontal="sent"),this.keyDownSent.vertical==="sent"&&this.cursors.down.isUp&&this.cursors.up.isUp&&(o.emit("player-key-up",{socId:o.id,movement:"vertical",x:this.player.x,y:this.player.y}),this.keyDownSent.vertical="ready"),this.keyDownSent.horizontal==="sent"&&this.cursors.left.isUp&&this.cursors.right.isUp&&(o.emit("player-key-up",{socId:o.id,movement:"horizontal",x:this.player.x,y:this.player.y}),this.keyDownSent.horizontal="ready"),this.player.body.setVelocity(0),this.cursors.left.isDown?this.player.body.setVelocityX(-s):this.cursors.right.isDown&&this.player.body.setVelocityX(s),this.cursors.up.isDown?this.player.body.setVelocityY(-s):this.cursors.down.isDown&&this.player.body.setVelocityY(s),this.player.body.velocity.normalize().scale(s),this.cursors.left.isDown?this.player.anims.play("left-walk",!0):this.cursors.right.isDown?this.player.anims.play("right-walk",!0):this.cursors.up.isDown?this.player.anims.play("back-walk",!0):this.cursors.down.isDown?this.player.anims.play("front-walk",!0):(this.player.anims.stop(),a.x<0?this.player.setTexture(this.avatarName,"left-walk.000"):a.x>0?this.player.setTexture(this.avatarName,"right-walk.000"):a.y<0?this.player.setTexture(this.avatarName,"back-walk.000"):a.y>0&&this.player.setTexture(this.avatarName,"front-walk.000")),this.moveOtherPlayers(s)}addPlayersToScene(){this.otherSprites=[],Object.keys(this.currentPlayers).forEach(e=>{e!==o.id&&(this.otherSprites[e]=this.addPlayer(this.currentPlayers[e]))})}addPlayer(e){const t=this.physics.add.sprite(e.x,e.y,e.avatar,"left-walk.000");return t.setPushable(!1),this.physics.add.collider(this.player,t,(s,a)=>{this.commDialog.createDialog(e)}),this.physics.add.collider(t,this.worldLayer),t.socId=e.socId,t.scale=1.2,y(t.anims,e.avatar),t}getKeyPress(e,t){if(t==="vertical"){if(e.up.isDown)return 1;if(e.down.isDown)return 3}else{if(e.right.isDown)return 2;if(e.left.isDown)return 4}}moveOtherPlayers(e){Object.keys(this.needsToUpdate).forEach(t=>{const s=this.otherSprites[t],a=this.currentPlayers[t].avatar,n=s.body.velocity.clone(),r=this.needsToUpdate[t];s.body.setVelocity(0),r.horizontal||r.vertical?(r.horizontal===4?s.body.setVelocityX(-e):r.horizontal===2&&s.body.setVelocityX(e),r.vertical===1?s.body.setVelocityY(-e):r.vertical===3&&s.body.setVelocityY(e),r.horizontal===4?s.anims.play("left-walk",!0):r.horizontal===2&&s.anims.play("right-walk",!0),r.vertical===1?s.anims.play("back-walk",!0):r.vertical===3&&s.anims.play("front-walk",!0),s.body.velocity.normalize().scale(e)):(s.anims.stop(),n.x<0?s.setTexture(a,"left-walk.000"):n.x>0?s.setTexture(a,"right-walk.000"):n.y<0?s.setTexture(a,"back-walk.000"):n.y>0&&s.setTexture(a,"front-walk.000"),delete this.needsToUpdate[t])})}}var v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACTSURBVHgB7ZbRCYAwDESvTuAIjuAIOplu4Eiu4AaOoBvEiAVRVATlRLgHoR+l3KMpJYAQBMwsxVd4eO7V20IDNlFgsC35nbMJXiCGtV77NnDacnIDMzUYSEACEvCgzNafkC8QJYoDgRZMPDA9aUUFJhdvQiISkchvRXjjXQih86X0Gndb/KnbttM291s/kMkgxAMmgqkZMBLV0IQAAAAASUVORK5CYII=";const Be={isEmpty:i=>{if(i==="")return"Password cannot be empty"},validateEmail:i=>{const e=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return i===""?"Email cannot be empty!":e.test(i)?void 0:"Invalid email"},validateName:i=>{const e=/^[A-Za-z\s]+$/;return i===""?"Name cannot be empty!":e.test(i)?i.length<=2?"Name must be greater than 2 letters":i.length>=19?"Name must be lesser than 20 letters":void 0:"Name can only contain alphabets"},validateUsername:i=>{const e=/^[a-zA-Z0-9]([._-](?![._-])|[a-zA-Z0-9]){3,18}[a-zA-Z0-9]$/;return i===""?"Username cannot be empty!":i.length<=2?"Username must be greater than 2 letters":i.length>14?"Username must be lesser than 14 letters":e.test(i)?void 0:"Username cannot have special characters"},validatePassword:i=>{const e=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d$@$!^%*#?()&{}_]{6,}$/;return i===""?"Password cannot be empty!":i.length<6?"Password must be greater than 6 letters":i.length>14?"Password must be lesser than 14 letters":e.test(i)?void 0:"Password must be a mixture of alphabets and numbers"},validatePhone:i=>{const e=/^(?:(?:\+|0{0,2})91(\s*[\-]\s*)?|[0]?)?[789]\d{9}$/;return i===""?"Phone number cannot be empty!":e.test(i)?void 0:"Invalid phone number!"}},R=i=>Be[{isEmpty:"isEmpty",name:"validateName",username:"validateUsername",password:"validatePassword",email:"validateEmail",phone:"validatePhone"}[i]];var ke="/assets/error.bdcda763.svg";const Q=[{name:"bald_blue_boy",gender:"male",desc:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Numquam cum at soluta veritatis, minus libero!"},{name:"bald_lightblue_boy",gender:"male",desc:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Numquam cum at soluta veritatis, minus libero!"},{name:"braided_purple_girl",gender:"female",desc:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Numquam cum at soluta veritatis, minus libero!"},{name:"curly_blue_girl",gender:"female",desc:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Numquam cum at soluta veritatis, minus libero!"},{name:"curly_white_girl",gender:"female",desc:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Numquam cum at soluta veritatis, minus libero!"},{name:"graduation_purple_boy",gender:"male",desc:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Numquam cum at soluta veritatis, minus libero!"},{name:"cap_blue_boy",gender:"male",desc:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Numquam cum at soluta veritatis, minus libero!"},{name:"beard_purple_boy",gender:"male",desc:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Numquam cum at soluta veritatis, minus libero!"},{name:"beard_red_boy",gender:"male",desc:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Numquam cum at soluta veritatis, minus libero!"},{name:"hijab_blue_girl",gender:"female",desc:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Numquam cum at soluta veritatis, minus libero!"}];class Ie{constructor(e,t){this.avatarList=Q,this.avatarIndex=0,this.makeDOMElements(),this.data=e,this.onClose=t}makeDOMElements(){const e=document.getElementById("overlays");this.bgDiv=document.createElement("div"),this.bgDiv.className="bg-disabled",this.container=document.createElement("div"),this.container.className="avatar-picker__container";const t=document.createElement("div");t.className="avatar-picker__preview";const s=document.createElement("div");s.className="flex-center",this.leftArrow=document.createElement("img"),this.leftArrow.addEventListener("click",()=>this.prevAvatar()),this.leftArrow.className="left-arrow",this.leftArrow.style.opacity=0,this.leftArrow.src=v,this.mainImg=document.createElement("img"),this.mainImg.className="img-preview",this.mainImg.src=`${l}/thumbnails/${this.avatarList[this.avatarIndex].name}.png`,this.rightArrow=document.createElement("img"),this.rightArrow.addEventListener("click",()=>this.nextAvatar()),this.rightArrow.className="right-arrow",this.rightArrow.src=v,s.append(this.leftArrow,this.mainImg,this.rightArrow),t.append(s);const a=document.createElement("div");a.className="avatar-picker__details";const n=document.createElement("h1");n.innerText="Character Selection";const r=document.createElement("h2");r.innerText="Name",this.nameElement=document.createElement("h3"),this.nameElement.innerText=this.avatarList[this.avatarIndex].name;const d=document.createElement("h2");d.innerText="About",this.descElement=document.createElement("h3"),this.descElement.innerText=this.avatarList[this.avatarIndex].desc;const u=document.createElement("button");u.innerText="Select this character",u.addEventListener("click",()=>{this.data.avatar=this.avatarList[this.avatarIndex].name,this.close()}),a.append(n,r,this.nameElement,d,this.descElement,u),this.container.append(t,a),e.append(this.bgDiv,this.container)}close(){this.onClose(),this.bgDiv.style.zIndex=-2,this.container.remove()}update(){const e=this.avatarList[this.avatarIndex];this.nameElement.innerText=e.name,this.descElement.innerText=e.desc,this.mainImg.src=`${l}/thumbnails/${e.name}.png`,this.leftArrow.style.opacity=this.avatarIndex===0?0:1,this.rightArrow.style.opacity=this.avatarIndex===this.avatarList.length-1?0:1}nextAvatar(e){this.avatarIndex+1<this.avatarList.length&&(this.avatarIndex++,this.update())}prevAvatar(){this.avatarIndex-1>=0&&(this.avatarIndex--,this.update())}}class De{constructor(e,t,s){E(this,"inputTypes",{"avatar-picker":"button",name:"text",username:"text",password:"password",email:"email",phone:"tel"});this.responseObj=e,this.dialog=t,this.errorExists=!1,this.data=s,this.makeDOMElements()}makeDOMElements(){this.responseContainer=document.createElement("div"),this.responseContainer.className="response-container";const e=document.createElement("div");e.className="response__input-container";const t=document.createElement("span");t.innerText="\u{1F449}",this.inputBox=document.createElement("input"),this.inputBox.focus(),this.inputBox.className="response__input-box",this.inputBox.type=this.inputTypes[this.responseObj.inputType],this.inputBox.placeholder=this.responseObj.placeholder,this.validator=R(this.responseObj.inputType),this.inputBox.addEventListener("keypress",a=>{const n=this.validator(a.target.value);if(n){this.indicateErrors(n);return}this.dialog.toggleButtons("enabled"),this.errorIcon.style.display="none",this.errorExists=!1,this.nextButton.disabled=!1,this.nextButton.removeAttribute("title"),this.errorIcon.removeAttribute("title")}),this.errorIcon=document.createElement("img"),this.errorIcon.className="error-icon",this.errorIcon.src=ke,this.errorIcon.style.display="none",this.errorExists=!0,e.append(t,this.inputBox,this.errorIcon),this.nextButton=document.createElement("button"),this.nextButton.className="response__next-btn",this.nextButton.disabled=!0,this.nextButton.innerText=this.responseObj.submitAfterInput?"Submit":"Next",this.nextButton.addEventListener("click",()=>{this.responseObj.submitAfterInput&&(this.data[this.responseObj.keyName]=this.inputBox.value,this.dialog.onSubmit(this.dialog)),this.dialog.nextDialog()});const s=document.createElement("img");s.src=h.avatar?`${l}/thumbnails/${h.avatar}.png`:`${l}/thumbnails/cap_blue_boy.png`,this.responseContainer.append(e,this.nextButton,s)}update(e){this.inputBox.focus(),console.log(this.responseObj.keyName),this.inputBox.value!=="Choose Avatar"&&(this.data[this.responseObj.keyName]=this.inputBox.value),this.data[e.keyName]||(this.dialog.toggleButtons("disabled"),this.nextButton.disabled=!0),this.responseObj=e,this.inputBox.type=this.inputTypes[this.responseObj.inputType],this.inputBox.placeholder=e.placeholder,this.inputBox.value=this.data[e.keyName]||"",this.responseObj.inputType=="avatar-picker"?(this.inputBox.value=e.placeholder,this.inputBox.onclick=()=>{new Ie(this.data,()=>{this.dialog.toggleButtons("enabled"),this.nextButton.disabled=!1})}):this.inputBox.onclick=()=>{},this.nextButton.innerText=e.submitAfterInput?"Submit":"Next",this.validator=R(this.responseObj.inputType),this.errorIcon.removeAttribute("title")}indicateErrors(e){this.errorIcon.style.display="inline-block",this.errorIcon.title=e,this.errorExists=!0,this.nextButton.disabled=!0,this.nextButton.title="There seems to be problem with your input, please check!",this.dialog.toggleButtons("disabled")}}class V extends P{constructor(e,t,s,a=!1,n=!1,r){super(null,null,a,n);this.sliderPosition=0,this.dialogObj=t,this.spriteImage=s,this.onSubmit=r,this.data=e}generateConversation(){const e=document.createElement("div");e.className="conv-container";const t=document.createElement("div");t.className="question-container";const s=document.createElement("img");return s.src=this.spriteImage,this.questionText=document.createElement("p"),this.questionText.innerHTML=this.dialogObj[this.sliderPosition].text,t.append(s,this.questionText),e.append(t),this.inputControl=new De(this.dialogObj[this.sliderPosition],this,this.data),this.toggleButtons("disabled"),e.append(this.inputControl.responseContainer),e}makeDOMElements(){const e=document.getElementById("overlays");this.alertDiv=document.createElement("div"),this.alertDiv.id="dialog";const t=document.createElement("div");t.className="control-container",this.prevButton=g("Prev",v,"left"),this.prevButton.addEventListener("click",()=>this.prevDialog()),this.progressSpan=document.createElement("span"),this.progressSpan.className="progress-indicator",this.progress=`${this.sliderPosition+1}/${this.dialogObj.length}`,this.progressSpan.innerText=this.progress,this.nextButton=g("Next",v,"right"),this.nextButton.addEventListener("click",()=>this.nextDialog()),this.closeBtn=document.createElement("button"),this.closeBtn.id="close-button",this.closeBtn.addEventListener("click",()=>this.closeAlert());const s=this.generateConversation();t.append(this.prevButton,this.progressSpan,this.nextButton,this.closeBtn),this.alertDiv.append(t,s),e.appendChild(this.alertDiv)}render(){this.progress=`${this.sliderPosition+1}/${this.dialogObj.length}`,this.progressSpan.innerText=this.progress,this.questionText.innerHTML=this.dialogObj[this.sliderPosition].text,this.inputControl.update(this.dialogObj[this.sliderPosition])}nextDialog(){this.sliderPosition+1<this.dialogObj.length&&(this.sliderPosition++,this.render())}prevDialog(){this.sliderPosition>0&&(this.sliderPosition--,this.render())}toggleButtons(e){let t="There seems to be problem with your input, please check!",s=!0;e==="enabled"&&(t="",s=!1),this.nextButton.disabled=s,this.prevButton.disabled=s,this.nextButton.title=t,this.prevButton.title=t}}const Ce=[{text:"What is your name?",inputType:"name",placeholder:"Enter your name",keyName:"name",submitAfterInput:!1},{text:"What should we call you?",inputType:"username",placeholder:"Enter your username",keyName:"username",submitAfterInput:!1},{text:"Your email id is ...?",inputType:"email",placeholder:"Enter your email ID",keyName:"email",submitAfterInput:!1},{text:"What do you look like?",inputType:"avatar-picker",placeholder:"Choose Avatar",keyName:"avatar"},{text:"What is your password?",inputType:"password",placeholder:"Enter password",keyName:"password",submitAfterInput:!0}],Te=[{text:"Your email id is ...?",inputType:"email",placeholder:"Enter your email ID",keyName:"email",submitAfterInput:!1},{text:"Tell me your secret code?",inputType:"password",placeholder:"Enter password",keyName:"password",submitAfterInput:!0}],Y={},Se=(i,e)=>{A.post("https://milo-back-end.herokuapp.com/login",Y).then(t=>{const s=t.data.jwt,a=w(x({},t.data),{jwt:void 0,bag:["LoginKey"]});C(a),localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("JWT",s),c.configure("Logged in successfully as "+a.name,"success"),c.show(),i.closeAlert(),e.dialog.closeAlert()}).catch(t=>{console.log(t),c.configure("There was some error please try again."),c.show()})},Ne=i=>{new V(Y,Te,`${l}/thumbnails/bald_blue_boy.png`,!1,!1,t=>Se(t,i)).show()},j={},Me=(i,e)=>{A.post("https://milo-back-end.herokuapp.com/signup",j).then(t=>{const s=t.data.jwt,a=w(x({},t.data),{jwt:void 0,bag:["LoginKey"]});C(a),localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("JWT",s),i.closeAlert(),e.dialog.closeAlert()}).catch(t=>{console.log(t)})},Le=i=>{new V(j,Ce,`${l}/thumbnails/bald_blue_boy.png`,!1,!1,t=>Me(t,i)).show()},Oe=(i,e,t)=>{const s=i.x-t.x,a=i.y-t.y;Math.abs(s)>Math.abs(a)?s>0?i.setTexture(e,"left-walk.000"):i.setTexture(e,"right-walk.000"):a>0?i.setTexture(e,"back-walk.000"):i.setTexture(e,"front-walk.000")};class Pe extends N.exports.Scene{constructor(){super({key:"Home1"})}preload(){const e=localStorage.getItem("user");e&&C(JSON.parse(e)),this.avatarName=h.avatar||"cap_blue_boy",this.load.image("login_tiles",`${l}/maps/tilesets/tuxmon-sample-32px-extruded.png`),this.load.tilemapTiledJSON("login_map",`${l}/maps/json/login.json`),Q.forEach(t=>this.load.atlas(t.name,`${l}/characters/sprites/${t.name}.png`,`${l}/characters/json/spritesheet.json`)),this.dialog=new U({text:'Hey, do you want to <span class="hy">Login</span> or <span class="hy">Sign Up</span>?',inputType:"buttons",buttons:[{text:"Login",onClickFn:()=>Ne(this)},{text:"Sign Up",onClickFn:()=>Le(this)}]},`${l}/thumbnails/bald_blue_boy.png`,!1,!0,()=>{this.resume(),this.updatePlayer()}),localStorage.getItem("JWT")&&D.init(h)}create(){const e=this.make.tilemap({key:"login_map"}),t=e.addTilesetImage("tuxmon-sample-32px-extruded","login_tiles");e.createLayer("Below Player",t,0,0);const s=e.createLayer("World",t,0,0),a=e.createLayer("Above Player",t,0,0),n=e.createLayer("interactive",t,0,0);s.setCollisionByProperty({collides:!0}),n.setCollisionByProperty({collides:!0}),a.setDepth(10);const r=e.findObject("Objects",m=>m.name==="Spawn Point"),d=e.findObject("Objects",m=>m.name==="Login Spawn Point");this.player=this.physics.add.sprite(r.x,r.y,this.avatarName,"front-walk.000").setBodySize(32,20,!0).setSize(20,32).setOffset(7,0),this.player.scale=1.3,this.physics.add.collider(this.player,s),this.loginSprite=this.physics.add.sprite(d.x,d.y,"bald_blue_boy","right-walk.000").setSize(20,32).setOffset(7,0),this.loginSprite.scale=1.3,this.loginSprite.body.immovable=!0,this.physics.add.collider(this.player,this.loginSprite,m=>{Oe(this.loginSprite,"bald_blue_boy",{x:m.x,y:m.y}),this.pause(),this.dialog.show()}),this.physics.add.collider(this.player,n,()=>{h&&localStorage.getItem("JWT")?(D.init(h),this.scene.start("Home")):console.log("Need to login or signup")}),y(this.player.anims,this.avatarName);const u=this.cameras.main;u.startFollow(this.player),u.setBounds(0,0,e.widthInPixels,e.heightInPixels),this.cursors=this.input.keyboard.createCursorKeys()}update(e,t){const s=175,a=this.player.body.velocity.clone();this.player.body.setVelocity(0),this.cursors.left.isDown?this.player.body.setVelocityX(-s):this.cursors.right.isDown&&this.player.body.setVelocityX(s),this.cursors.up.isDown?this.player.body.setVelocityY(-s):this.cursors.down.isDown&&this.player.body.setVelocityY(s),this.player.body.velocity.normalize().scale(s),this.cursors.left.isDown?this.player.anims.play("left-walk",!0):this.cursors.right.isDown?this.player.anims.play("right-walk",!0):this.cursors.up.isDown?this.player.anims.play("back-walk",!0):this.cursors.down.isDown?this.player.anims.play("front-walk",!0):(this.player.anims.stop(),a.x<0?this.player.setTexture(this.avatarName,"left-walk.000"):a.x>0?this.player.setTexture(this.avatarName,"right-walk.000"):a.y<0?this.player.setTexture(this.avatarName,"back-walk.000"):a.y>0&&this.player.setTexture(this.avatarName,"front-walk.000"))}pause(){this.input.keyboard.disableGlobalCapture()}resume(){this.input.keyboard.enableGlobalCapture()}updatePlayer(){localStorage.getItem("JWT")&&(this.avatarName=h.avatar,this.player.anims.remove("front-walk"),this.player.anims.remove("back-walk"),this.player.anims.remove("left-walk"),this.player.anims.remove("right-walk"),y(this.player.anims,this.avatarName),this.player.setTexture(this.avatarName,"back-walk.000"))}}class Ue{constructor(){this.makeDOMElements()}makeDOMElements(){this.container=document.getElementById("snackbars"),this.snackbarDiv=document.createElement("div"),this.snackbarDiv.id="snackbar",this.textSpan=document.createElement("span"),this.textSpan.innerHTML="",this.closeButton=document.createElement("button"),this.closeButton.id="close-button",this.closeButton.addEventListener("click",()=>this.close()),this.snackbarDiv.append(this.textSpan,this.closeButton),this.container.append(this.snackbarDiv),this.close()}setText(e){this.textSpan.innerHTML=e}show(){this.container.style.zIndex=10,this.snackbarDiv.className=""}configure(e,t){this.text=e,this.accent=t,this.textSpan.innerHTML=this.text}close(){this.container.style.zIndex=-1,this.snackbarDiv.className="closeState"}}var Re="data:image/png;base64,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";class Qe{constructor(){}init({avatar:e,username:t,exp:s,money:a}){this.avatar=e,this.username=t,this.max=100,this.level=parseInt(s/this.max,10),this.exp=s%this.max,this.level===0&&this.level++,this.money=a,this.makeDOMElements()}makeDOMElements(){const e=document.getElementById("overlays");this.container=document.createElement("div"),this.container.className="stats-container";const t=document.createElement("div");t.className="misc-details";const s=this.createImgSpanDiv("avatar-img-div",`${l}/thumbnails/${this.avatar}.png`,this.username),a=this.createImgSpanDiv("money-div",Re,`$ ${this.money}`);t.append(s,a);const n=document.createElement("div");this.expSpan=document.createElement("span"),this.expSpan.innerHTML=`Level ${this.level}<br>${this.exp} xp / ${this.max} xp`,this.createExpMeter(),n.append(this.expSpan,this.meterContainer),n.className="exp-details",this.container.append(t,n),e.append(this.container)}createImgSpanDiv(e,t,s){const a=document.createElement("div");a.className=e;const n=document.createElement("img");n.src=t;const r=document.createElement("span");return r.innerText=s,a.append(n,r),a}createExpMeter(){this.meterContainer=document.createElement("div"),this.meterContainer.className="exp-meter-container",this.meterFiller=document.createElement("div"),this.meterFiller.className="exp-meter-fill",this.meterFiller.style.width=`${this.exp}%`,this.meterContainer.append(this.meterFiller)}incrementMoney(e){this.money+=e;const t=document.querySelector(".money-div").lastChild;t.innerText=`$ ${this.money}`}decrementMoney(e){this.money-=e;const t=document.querySelector(".money-div").lastChild;t.innerText=`$ ${this.money}`}incrementExp(e){this.exp+=e,this.expSpan.innerText=`${this.exp} xp`,this.meterFiller.style.width=`${this.exp}%`}}let h={};const D=new Qe,C=i=>{h=i},o=F("http://192.168.31.132:5000/"),c=new Ue;o.on("connect",()=>{console.log("Connected to the server...")});const Ve={type:Phaser.AUTO,width:960,height:700,parent:"canvas",pixelArt:!0,physics:{default:"arcade",arcade:{gravity:{y:0}}},scene:Pe},Ye=new Phaser.Game(Ve);Ye.scene.add("Home",Ee);
